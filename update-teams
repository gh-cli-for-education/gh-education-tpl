ORG="$2"

QUERY='query getInfo($organization: String!) {
  organization(login: $organization) {
    name
    url
    teams(first: 100) {
      totalCount
      edges {
        node {
          name
          members(first: 100) {
            totalCount
            edges {
              memberAccessUrl
              node {
								name
                url
                email
                login
                avatarUrl
                websiteUrl
                projectsUrl
                organization(login: $organization) {
                  repositories (first: 10) {
                    totalCount
                    edges {
                      node {
                        name
                        url
                      }
                    }
                  }
                }
              }
            }
          }
          url
        }
      }
    }
  }
}'

TEAMS=$(gh api graphql -F organization="$ORG" -f query="$QUERY" | jq .)

TEMPLATE="
export default $TEAMS
"

echo $TEMPLATE >> "$1"